{{set . "title" "newbill"}}
{{template "header.html" .}}

<div class="container">
  <div class="row">
    <div class="span6">{{template "flash.html" .}}</div>
  </div>
</div>

<form class="form-horizontal" role="form" action="{{url "Bills.Save"}}" onsubmit="return checkInfo();" method="POST">
  <fieldset>

    <legend>
      <span class="glyphicon glyphicon-th"></span>
      {{msg . "add"}}{{msg . "bill"}}
    </legend>

    <!-- set kind -->
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
	    {{if eq .bill.Kind "income"}}
        	<label class="radio-inline">
                <input type="radio" name="bill.Kind" id="inlineRadio1" value="expense">{{msg $ "expense"}}</label>
			<label class="radio-inline">
				<input type="radio" name="bill.Kind" id="inlineRadio2" value="income" checked>{{msg $ "income"}}</label>
		{{else}}
			<label class="radio-inline">
                <input type="radio" name="bill.Kind" id="inlineRadio1" value="expense" checked>{{msg $ "expense"}}</label>
			<label class="radio-inline">
				<input type="radio" name="bill.Kind" id="inlineRadio2" value="income">{{msg $ "income"}}</label>
		{{end}}
      </div>
    </div>

    <!-- set date -->
    <div class="form-group">
      <label for="inputDate" class="col-sm-2 control-label">{{msg $ "date"}}</label>
      <div class="col-sm-10">
        <input size="10" type="text" id="inputDate" name="bill.Date" value="{{.bill.Date.Format "2006-01-02"}}" class="form-control form_date" readonly required></div>
    </div>
    <!-- set title -->
    <div class="form-group">
      <label for="inputTitle" class="col-sm-2 control-label">{{msg $ "title"}}</label>
      <div class="col-sm-10">
        <input type="text" id="inputTitle" name ="bill.Title" value="{{.bill.Title}}" class="form-control" maxlength="100" placeholder={{msg $ "bill.title.maxsize"}} required autofocus></div>
    </div>

    <!-- set amount -->
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <div class="input-group">
          <span class="input-group-addon">ï¿¥</span>
	{{if floateq .bill.Amount 0.0}}
          <input type="number" step="0.01" class="form-control" name="bill.Amount" value="" placeholder={{msg $ "amount"}} required></div>
      {{else}}
         <input type="number" step="0.01" class="form-control" name="bill.Amount" value="{{.bill.Amount}}" placeholder={{msg $ "amount"}} required></div>	
	{{end}}
	</div>
    </div>

    <!-- set account -->
    <div class="form-group">
      <label for="selectAccount" class="col-sm-2 control-label">{{msg . "account"}}</label>
      <div class="col-sm-10">
        <select id="selectAccount" class="form-control" name="bill.Account_id">
          {{range .accounts}}
			{{if eq $.bill.Account_id .Account_id}}
               <option value="{{.Account_id}}" selected = "selected">{{.Name}}</option>
			{{else}}
			   <option value="{{.Account_id}}">{{.Name}}</option>
			{{end}}
          {{end}}
        </select>
      </div>
    </div>

    <!-- set catelog -->
    <div class="form-group">
      <label for="selectCatelog" class="col-sm-2 control-label">{{msg . "catelog"}}</label>
      <div class="col-sm-10">
        <select id="selectCatelog" class="form-control" name="bill.Catelog_id">
          {{range .catelogs}}
			{{if eq $.bill.Catelog_id .Catelog_id}}
               <option value="{{.Catelog_id}}" selected = "selected">{{.Name}}</option>
			{{else}}
			   <option value="{{.Catelog_id}}">{{.Name}}</option>
			{{end}}
          {{end}}
        </select>
      </div>
    </div>

    <!-- set description -->
    <div class="form-group">
      <label for="inputDes" class="col-sm-2 control-label">{{msg $ "description"}}</label>
      <div class="col-sm-10">
        <textarea id="inputDes" name ="bill.Description" class="form-control" maxlength="1000" placeholder="{{msg $ "bill.description.maxsize"}}" rows="3">{{.bill.Description}}</textarea>
      </div>
    </div>

    <!-- set buttons -->
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-4">
        <input type="hidden" name="bill.Bill_id" value="{{.bill.Bill_id}}">
        <input type="hidden" name="st" id="sub-type" value="">
        <button class="btn btn-primary" id="sub-type-save" type="submit">{{msg . "save"}}</button>
        <button class="btn btn-primary" id="sub-type-con" type="submit">{{msg . "save.and.continue"}}</button>
        <a role="button" class="btn btn-info" href="{{url "Bills.Index"}}">{{msg . "cancel"}}</a>
      </div>
    </div>

  </fieldset>
</form>

<script type="text/javascript">
    function checkInfo() {
        //url="{{url "Bills.Save" .bill.Bill_id}}"

        if (document.activeElement.id == 'sub-type-save') {
            document.getElementById("sub-type").value = "save";
        } else if (document.activeElement.id == 'sub-type-con') {
            document.getElementById("sub-type").value = "con";
        }
        return true;
    }
</script>

{{template "footer.html" .}}